;/*FB_PKG_DELIM*/

__d("MAWEncryptedBackupsRestoreDialogContexts_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWEncryptedBackupsRestoreDialogContexts_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null}],storageKey:null}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWChatEncryptedBackupsDismissalDialogContextProvider.react",["MWChatEncryptedBackupsDismissalDialogContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useMemo;var j=b.useState;function a(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.isDismissedDisabledValue;a=j(a);var f=a[0];a=a[1];b[0]!==f?(a={isDismissedDisabled:f,setIsDismissedDisabled:a},b[0]=f,b[1]=a):a=b[1];f=a;a=f;b[2]!==e||b[3]!==a?(f=i.jsx(c("MWChatEncryptedBackupsDismissalDialogContext").Provider,{value:a,children:e}),b[2]=e,b[3]=a,b[4]=f):f=b[4];return f}g["default"]=a}),98);
__d("MWChatEncryptedBackupsRestoreUpsellDialogContextProvider.react",["MWChatEncryptedBackupsSetIsDialogPersistedContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;function a(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.setIsDialogPersisted;var f;b[0]!==a?(f={setIsDialogPersisted:a},b[0]=a,b[1]=f):f=b[1];f=f;f=f;if(a!=null){b[2]!==e||b[3]!==f?(a=i.jsx(c("MWChatEncryptedBackupsSetIsDialogPersistedContext").Provider,{value:f,children:e}),b[2]=e,b[3]=f,b[4]=a):a=b[4];return a}return e}g["default"]=a}),98);
__d("MWEBHasSeenAutoRestoreNoticeContextProvider.react",["MWEBHasSeenAutoRestoreNoticeContext","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useMemo;function a(a){var b=d("react-compiler-runtime").c(5),e=a.children;a=a.hasSeenNotice;var f;b[0]!==a?(f={hasSeenNotice:a},b[0]=a,b[1]=f):f=b[1];a=f;f=a;b[2]!==e||b[3]!==f?(a=i.jsx(c("MWEBHasSeenAutoRestoreNoticeContext").Provider,{value:f,children:e}),b[2]=e,b[3]=f,b[4]=a):a=b[4];return a}g["default"]=a}),98);
__d("MAWEncryptedBackupsRestoreDialogContexts.react",["CometRelay","CometTransientDialogProvider.react","MAWEncryptedBackupsRestoreDialogContexts_query.graphql","MWChatEncryptedBackupsDismissalDialogContextProvider.react","MWChatEncryptedBackupsRestoreUpsellDialogContextProvider.react","MWEBFlowSourceContextProvider.react","MWEBHasSeenAutoRestoreNoticeContextProvider.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContextProvider.react","react","react-compiler-runtime","useMWChatEncryptedBackupsVestaUserInfo","useMWEncryptedBackupsGetVirtualDevicesPreloaded"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));i.useMemo;function a(a){var e,f=d("react-compiler-runtime").c(30),g=a.children,i=a.query,k=a.setIsDialogPersisted;a=a.source;i=d("CometRelay").useFragment(h!==void 0?h:h=b("MAWEncryptedBackupsRestoreDialogContexts_query.graphql"),i);e=(e=i.viewer.messenger_default_encrypted_backup)==null?void 0:e.vesta_user_info;var l;f[0]!==e?(l={vestaGetUserInfoResponse$key:e},f[0]=e,f[1]=l):l=f[1];e=c("useMWChatEncryptedBackupsVestaUserInfo")(l);f[2]!==i.xfb_backup?(l={encryptedBackup:i.xfb_backup},f[2]=i.xfb_backup,f[3]=l):l=f[3];l=c("useMWEncryptedBackupsGetVirtualDevicesPreloaded")(l);l=l.getVirtualDevices;var m;f[4]!==l?(m=l(),f[4]=l,f[5]=m):m=f[5];l=m;m=l.offlineDevicesCount;l=l.vestaClientID;var n;f[6]!==e.attemptsRemaining||f[7]!==e.loginTimeoutRemainingSecs?(n={attemptsRemaining:e.attemptsRemaining,loginTimeoutRemainingSecs:e.loginTimeoutRemainingSecs,vestaClientID:null},f[6]=e.attemptsRemaining,f[7]=e.loginTimeoutRemainingSecs,f[8]=n):n=f[8];e=n;n=e;e=(e=(e=i.xfb_backup)==null?void 0:e.has_otc_eligible_devices)!=null?e:void 0;i=(i=(i=i.viewer.encrypted_backup)==null?void 0:i.has_seen_eb_auto_restore_notice)!=null?i:!1;var o;f[9]!==k?(o=function(a){k==null?void 0:k(a)},f[9]=k,f[10]=o):o=f[10];var p;f[11]!==g?(p=j.jsx(c("CometTransientDialogProvider.react"),{children:g}),f[11]=g,f[12]=p):p=f[12];f[13]!==p||f[14]!==n?(g=j.jsx(d("MWEBVestaUserInfoContext.react").MWEBVestaUserInfoContext.Provider,{value:n,children:p}),f[13]=p,f[14]=n,f[15]=g):g=f[15];f[16]!==g||f[17]!==o?(p=j.jsx(c("MWChatEncryptedBackupsDismissalDialogContextProvider.react"),{isDismissedDisabledValue:!1,children:j.jsx(c("MWChatEncryptedBackupsRestoreUpsellDialogContextProvider.react"),{setIsDialogPersisted:o,children:g})}),f[16]=g,f[17]=o,f[18]=p):p=f[18];f[19]!==a||f[20]!==p?(n=j.jsx(c("MWEBFlowSourceContextProvider.react"),{source:a,children:p}),f[19]=a,f[20]=p,f[21]=n):n=f[21];f[22]!==n||f[23]!==i?(g=j.jsx(c("MWEBHasSeenAutoRestoreNoticeContextProvider.react"),{hasSeenNotice:i,children:n}),f[22]=n,f[23]=i,f[24]=g):g=f[24];f[25]!==m||f[26]!==g||f[27]!==e||f[28]!==l?(o=j.jsx(c("MWEBVirtualDevicesContextProvider.react"),{hasOtcEligibleDevicesInitialValue:e,offlineDevicesCountInitialValue:m,vestaClientIDInitialValue:l,children:g}),f[25]=m,f[26]=g,f[27]=e,f[28]=l,f[29]=o):o=f[29];return o}g["default"]=a}),98);
__d("MWChatEncryptedBackupsOTCHelpDialogPage.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{}}},root:c("JSResourceForInteraction")("MWChatEncryptedBackupsOTCHelpDialogPage.react").__setRef("MWChatEncryptedBackupsOTCHelpDialogPage.entrypoint")};g["default"]=a}),98);
__d("MWChatEncryptedBackupsPinCodeRestoreStep.react",["fbt","CometPlaceholder.react","FocusRegion.react","JSResourceForInteraction","MWChatEBPinCodeVerifyIndicator.react","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWEBQPResetPIN.react","MWEBVestaUserInfoContext.react","MWXColumn.react","MWXColumnItem.react","MWXDialogPageLegacy.react","MWXLink.react","MWXMultiStepDialogHeader.react","MWXText.react","QPLUserFlow","cr:6247","focusScopeQueries","gkx","lazyLoadComponent","promiseDone","react","react-compiler-runtime","useEncryptedBackupsQplImpressionRef","useMWChatEncryptedBackupsPinCodeRestore","xplatToDOMRef"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useEffect,l=e.useState,m=c("gkx")("23219"),n=c("JSResourceForInteraction")("MWChatEncryptedBackupsPinCodeBlockedStep.react").__setRef("MWChatEncryptedBackupsPinCodeRestoreStep.react"),o="chat-encrypted-backups-dialog-layout-restore-step";function a(a){var e=d("react-compiler-runtime").c(31),f=a.clientID,g=a.onChooseOtc,i=a.onClose,q=a.onComplete,r=a.onForgotPin;a=a.shouldShowForgotButton;a=a===void 0?!0:a;var s=l(null),t=s[0];s=s[1];var u;e[0]!==f||e[1]!==q?(u={clientID:f,focusRegionId:o,onVestaComplete:q},e[0]=f,e[1]=q,e[2]=u):u=e[2];f=d("useMWChatEncryptedBackupsPinCodeRestore").useMWChatEncryptedBackupsPinCodeRestore(u);var v=f.focusOnInput;u=f.inputProps;var w=f.isInProgress,x=f.isLabyrinthError,y=f.isPinCodeIncorrect;f=f.isVestaError;var z=l(!1),A=z[0];z=z[1];w=w||A;e[3]===Symbol["for"]("react.memo_cache_sentinel")?(A=h._("__JHASH__ZgAep0T7S_u__JHASH__"),e[3]=A):A=e[3];A=A;var B=d("MWEBVestaUserInfoContext.react").useMWEBVestaUserInfo(),C=B.attemptsRemaining;B=B.loginTimeoutRemainingSecs;var D=C===0,E=d("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),F=c("useEncryptedBackupsQplImpressionRef")(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_SCREEN",void 0,function(){v(),H!=null&&c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_OPTION_DISPLAYED_RESTORE_SCREEN")}),G;e[4]!==E||e[5]!==w||e[6]!==r||e[7]!==a?(G=a?j.jsx(c("MWXLink.react"),{disabled:E||w,onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_FORGOT_PIN_CLICK"),r()},rel:"noreferrer",testid:void 0,children:j.jsx(c("MWXText.react"),{color:E||w?"disabled":"highlight",type:"button2",children:h._("__JHASH__UY_FDJp7Rzt__JHASH__")})}):null,e[4]=E,e[5]=w,e[6]=r,e[7]=a,e[8]=G):G=e[8];a=G;var H=g!==null?j.jsx(c("MWXText.react"),{color:E||w?"disabled":"highlight",type:"button2",children:j.jsx(c("MWXLink.react"),{disabled:E||w,onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK"),g()},rel:"noreferrer",testid:void 0,children:h._("__JHASH__rIytKXj5Yr0__JHASH__")})}):null;G=H!=null?H:a;e[9]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__6pjlJMQcqkh__JHASH__"),e[9]=a):a=e[9];a=a;var I;e[10]===Symbol["for"]("react.memo_cache_sentinel")?(I=c("lazyLoadComponent")(n),e[10]=I):I=e[10];I=I;if(e[11]!==C||e[12]!==u||e[13]!==E||e[14]!==w||e[15]!==x||e[16]!==y||e[17]!==f||e[18]!==B||e[19]!==D||e[20]!==i||e[21]!==q||e[22]!==t||e[23]!==F||e[24]!==G||e[25]!==H){a=E?j.jsx(I,{attemptsRemaining:C,loginTimeoutRemainingSecs:B,onClose:i,onComplete:q}):j.jsx(c("MWXDialogPageLegacy.react"),{callToActionGroupLayout:"expanded",includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION:!1,ref:d("xplatToDOMRef").xplatToDOMRef(F),children:j.jsxs(c("MWXColumn.react"),{align:"center",paddingHorizontal:16,paddingVertical:16,spacing:0,children:[j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:16,children:j.jsx("div",babelHelpers["extends"]({className:"xg87l8a"},{children:j.jsx(c("MWEBQPResetPIN.react"),{})}))}),j.jsx(c("MWXColumnItem.react"),{align:"center",paddingVertical:16,children:j.jsx(c("MWXText.react"),{align:"center",type:"headlineEmphasized2",children:a})}),j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:j.jsx("div",babelHelpers["extends"]({className:"x1l90r2v x2b8uid"},{children:A}))})}),j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:(I=t)!=null?I:y&&H!=null?h._("__JHASH__92mf973T2UM__JHASH__"):y?h._("__JHASH__TG8l6XqQAul__JHASH__"):x||f?h._("__JHASH__oI6Lha5PMTv__JHASH__"):void 0,children:j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:o,children:j.jsx(c("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers["extends"]({},u,{disabled:B!=null||D||w,testid:void 0}))})})}),w&&j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx(c("MWChatEBPinCodeVerifyIndicator.react"),{isMessenger:m})}),!w&&j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx("div",babelHelpers["extends"]({className:"x1y1aw1k"},{children:G}))}),b("cr:6247")!=null&&j.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatEncryptedBackupsPinCodeRestoreStep",children:j.jsx(b("cr:6247"),{onComplete:q,onError:s,setIsLoading:z})})]})});e[11]=C;e[12]=u;e[13]=E;e[14]=w;e[15]=x;e[16]=y;e[17]=f;e[18]=B;e[19]=D;e[20]=i;e[21]=q;e[22]=t;e[23]=F;e[24]=G;e[25]=H;e[26]=a}else a=e[26];A=a;e[27]===Symbol["for"]("react.memo_cache_sentinel")?(I=[],e[27]=I):I=e[27];k(p,I);e[28]===Symbol["for"]("react.memo_cache_sentinel")?(s=j.jsx(c("MWXMultiStepDialogHeader.react"),{withCloseButton:!1,withoutBackButton:!0}),e[28]=s):s=e[28];e[29]!==A?(z=j.jsxs(j.Fragment,{children:[s,A]}),e[29]=A,e[30]=z):z=e[30];return z}function p(){c("promiseDone")(n.load())}g["default"]=a}),226);
__d("MWChatEncryptedBackupsRingIndeterminateIcon.react",["CometHeroHoldTrigger.react","MWXSpinner.react","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={large:{minHeight:"x1zwvfr",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",$$css:!0},small:{minHeight:"x1edz59j",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(6);a=a.size;a=a===void 0?"large":a;var e;b[0]!==a?(e=(h||(h=c("stylex"))).props(k.root,k[a]),b[0]=a,b[1]=e):e=b[1];var f;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=j.jsx(c("CometHeroHoldTrigger.react"),{description:"MWEBRingSpinner",hold:!0}),f=j.jsx(c("MWXSpinner.react"),{color:"blue",size:60}),b[2]=a,b[3]=f):(a=b[2],f=b[3]);b[4]!==e?(a=j.jsxs("div",babelHelpers["extends"]({},e,{children:[a,f]})),b[4]=e,b[5]=a):a=b[5];return a}g["default"]=a}),98);
__d("MWEBOTCDialogStep.react",["cr:3134","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=d("react-compiler-runtime").c(2),e;c[0]!==a?(e=i.jsx(b("cr:3134"),babelHelpers["extends"]({},a)),c[0]=a,c[1]=e):e=c[1];return e}g["default"]=a}),98);
__d("MWEBOTCErrorMessages",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(){return h._("__JHASH__lBlURV9iIv0__JHASH__")};b=function(){return h._("__JHASH__rIH_-tfv2x2__JHASH__")};c=function(){return h._("__JHASH__WypD50Gdi03__JHASH__")};d=function(){return h._("__JHASH__7uRJ4wtXcoz__JHASH__")};e=function(){return h._("__JHASH__XUu1h3R4qPj__JHASH__")};f=function(){return h._("__JHASH__ndaWq552FSK__JHASH__")};var i=function(){return h._("__JHASH__WoNRZZnIdhP__JHASH__")};g.getOtcIsWrongErrorMessage=a;g.getNoSessionOngoingErrorMessage=b;g.getMaxAttemptsReachedErrorMessage=c;g.getSessionExpiredErrorMessage=d;g.getGeneralErrorMessage=e;g.getNotificationFailedToSendErrorMessage=f;g.getFailedToFetchOtcDevicesErrorMessage=i}),226);
__d("MWEBOTCGating",["qex"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a;return(a=c("qex")._("2054"))!=null?a:!1}function b(){var a;return(a=c("qex")._("2118"))!=null?a:!1}function d(){var a;return(a=c("qex")._("2119"))!=null?a:!1}function e(){var a;return(a=c("qex")._("2117"))!=null?a:!1}function f(){var a;return(a=c("qex")._("2055"))!=null?a:!1}g.showDevicesPopover=a;g.showResendButton=b;g.showNewTitle=d;g.shouldSeeNewHelpFlow=e;g.shouldCheckFirst=f}),98);
__d("MWEBQPOneTimeCode.react",["ix","CometImageFromIXValue.react","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("gkx")("23433");b=j.forwardRef(a);function a(a,b){var e=d("react-compiler-runtime").c(5),f=a.alt;a=a.xstyle;var g;e[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=k?h("421460"):h("421458"),e[0]=g):g=e[0];g=g;e[1]!==f||e[2]!==b||e[3]!==a?(g=j.jsx(c("CometImageFromIXValue.react"),{alt:f,ref:b,source:g,xstyle:a}),e[1]=f,e[2]=b,e[3]=a,e[4]=g):g=e[4];return g}e=b;g["default"]=e}),98);
__d("PAKEClientTypeEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({PAKE_TEST:-1,ENCRYPTED_BACKUPS:0,EB_MULTI_USER_OTC:1});f["default"]=a}),66);
__d("useMWAbandonRestoreConfirmationDialog",["fbt","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","gkx","react","react-compiler-runtime","useMWXConfirmationDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i;(i||d("react")).useCallback;function a(a){var b=d("react-compiler-runtime").c(3),e=c("useMWXConfirmationDialog")(),f=c("gkx")("23219"),g;b[0]!==a||b[1]!==e?(g=function(){e({body:f?h._("__JHASH__igJ7_fPkBWf__JHASH__"):h._("__JHASH__mJ4KzCvoneV__JHASH__"),confirm:h._("__JHASH__NclomsdgTqa__JHASH__"),title:h._("__JHASH__Lc-TiofSivN__JHASH__")},function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"DONT_RESTORE_CONFIRMATION_CLICK"),a==null?void 0:a()},j)},b[0]=a,b[1]=e,b[2]=g):g=b[2];return g}function j(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"DONT_RESTORE_CANCEL_CLICK")}g["default"]=a}),226);
__d("MWEBRestoreDialog.react",["InteractionTracing.xplat","MAWEncryptedBackupsRestoreStep.react","MAWPinCodeGating","MWChatEncryptedBackupsDismissalDialogContext","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWChatEncryptedBackupsRingIndeterminateIcon.react","MWEBHasSeenAutoRestoreNoticeContext","MWEBLazyLoadResetPinPage","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeviceRegistrationId","MWEncryptedBackupsForgotPinStep","MWEncryptedBackupsForgotRCStep","MWEncryptedBackupsOtcRestoreSteps","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXMultiStepDialog.react","PAKECleanupSessionReasonEnum","PAKEClientTypeEnum","QPLUserFlow","cr:6320","cr:6321","promiseDone","react","requireDeferred","useLabyrinthLogging","useMWAbandonRestoreConfirmationDialog","useMWEBFlowSourceContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useRef,o=c("requireDeferred")("CleanupPakeSession").__setRef("MWEBRestoreDialog.react"),p=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreDialog.react");function a(a){var e=a.cancellable;e=e===void 0?!0:e;var f=a.onClose,g=a.onDismissUpsell,i=n(!1),q=(h||(h=c("useReStore")))();a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var r=a.startFlow,s=c("useMWEBFlowSourceContext")();a=l(c("MWChatEncryptedBackupsDismissalDialogContext"));var t=a.isDismissedDisabled,u=a.setIsDismissedDisabled;a=d("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices();var v=a.virtualDeviceInfo;a=l(c("MWEBHasSeenAutoRestoreNoticeContext"));var w=a.hasSeenNotice,x=k(function(){g==null?void 0:g(),v.doesUserHaveOtcEligibleDevices===!0&&o.onReady(function(a){c("promiseDone")(a({cleanupReason:c("PAKECleanupSessionReasonEnum").FLOW_ABANDONED,clientType:c("PAKEClientTypeEnum").ENCRYPTED_BACKUPS,deviceId:d("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId(),storage:q}))})},[g,v.doesUserHaveOtcEligibleDevices,q]);a=k(function(){d("MWChatEncryptedBackupsLogging").closeDialogCancelFlow({event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,onClose:function(){return f()}}),x()},[f,x]);var y=c("useMWAbandonRestoreConfirmationDialog")(a),z=k(function(){d("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"reset_skip",event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),f(),x()},[f,x]),A=b("cr:6320")==null?void 0:b("cr:6320")(),B=b("cr:6321")==null?void 0:b("cr:6321")(),C=v.vestaClientID!=null;m(function(){i.current||(i.current=!0,d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:q,onFetch:function(a){var b=a.ebsmWiped,e=a.firstUpsellTime,f=a.hasEbKeysLocally,g=a.hasEBSM,h=a.hasPDB,i=a.hasUserRestoredBefore;a=a.hasUserRestoredBeforeTemp;var j=s();r({additionalAnnotations:{eb_session_identifier:e,ebsm_wiped:b,has_eb_keys_locally:f,has_ebsm:g,has_pdb:h,has_user_restored_before:i,has_user_restored_before_temp:a,restore_upsell_first_impression_time:e},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:j});j===c("MWChatEncryptedBackupsQPLSource.enum").INBOX_INTERSTITIAL_SOFTBLOCK&&(c("InteractionTracing.xplat").getPendingInteractions().forEach(function(a){a.addAnnotationBoolean("eb_soft_block",!0)}),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"INBOX_SOFTBLOCK_RESTORE_SCREEN"));c("promiseDone")(p.load(),function(a){return a(f)})}}))},[s,r,q]);return j.jsx(c("MWXMultiStepDialog.react"),{onClose:t?f:y,size:"small",withCloseButton:e,children:function(a){if(v.offlineDevicesCount===-1)return j.jsx(c("MWChatEncryptedBackupsRingIndeterminateIcon.react"),{});var b=function(b){return A!=null?A({onNextStep:b,pushPage:a}):B!=null?B({hasSeenNotice:w,onNextStep:b,pushPage:a}):f()};return j.jsx(c("MAWEncryptedBackupsRestoreStep.react"),{clientID:d("MAWPinCodeGating").isPinCodeEnabled()&&C?v.vestaClientID:null,offlineDevicesCount:v.offlineDevicesCount,onChooseOtc:v.doesUserHaveOtcEligibleDevices?function(){return d("MWEncryptedBackupsOtcRestoreSteps").pushByOneTimeCodePage({onClose:y,onOtcComplete:function(){b(function(){u(!0),c("MWEBLazyLoadResetPinPage")(f,a)})},onSkip:z,pushPage:a})}:null,onClose:y,onComplete:function(){b(f)},onForgotPin:function(){d("MWEncryptedBackupsForgotPinStep").pushForgotPinPage({offlineDeviceCount:v.offlineDevicesCount,onClose:f,onComplete:f,pushPage:a})},onForgotRC:function(){d("MWEncryptedBackupsForgotRCStep").pushForgotRCPage({onClose:f,onComplete:f,pushPage:a})},onSkip:z,pushPage:a,shouldShowForgotButton:!0,source:s()})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreInterstitialDialogWrapper_query.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEBRestoreInterstitialDialogWrapper_query",selections:[{args:null,kind:"FragmentSpread",name:"MAWEncryptedBackupsRestoreDialogContexts_query"}],type:"Query",abstractKey:null};e.exports=a}),null);
__d("MWEBRestoreInterstitialDialogWrapper.react",["CometRelay","MAWEncryptedBackupsRestoreDialogContexts.react","MWChatEncryptedBackupsQPLSource.enum","MWEBRestoreDialog.react","MWEBRestoreInterstitialDialogWrapper_query.graphql","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var e=d("react-compiler-runtime").c(9),f=a.query,g=a.setIsClosed,i=a.setIsDialogPersisted;a=a.setIsDismissed;f=d("CometRelay").useFragment(h!==void 0?h:h=b("MWEBRestoreInterstitialDialogWrapper_query.graphql"),f);var k=c("MWChatEncryptedBackupsQPLSource.enum").INBOX_INTERSTITIAL_SOFTBLOCK,l;e[0]!==g?(l=function(){return g(!0)},e[0]=g,e[1]=l):l=e[1];var m;e[2]!==a||e[3]!==l?(m=j.jsx(c("MWEBRestoreDialog.react"),{onClose:l,onDismissUpsell:a}),e[2]=a,e[3]=l,e[4]=m):m=e[4];e[5]!==f||e[6]!==i||e[7]!==m?(a=j.jsx(c("MAWEncryptedBackupsRestoreDialogContexts.react"),{query:f,setIsDialogPersisted:i,source:k,children:m}),e[5]=f,e[6]=i,e[7]=m,e[8]=a):a=e[8];return a}g["default"]=a}),98);
__d("usePakeInitiatorManager",["FBLogger","PakeCpaceWasm","Promise","asyncToGeneratorRuntime","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");e.useCallback;var j=e.useEffect,k=e.useRef,l=c("requireDeferred")("establishPakeHandshakeAsInitiator").__setRef("usePakeInitiatorManager"),m=3e4;function a(a){var e=d("react-compiler-runtime").c(14),f=a.onGeneralFailure,g=a.onMaxAttemptsReached,i=a.onNoSessionExists,q=a.onSessionExpired,r=a.onSuccessfulSecretDecryption,s=a.onWrongOtc,t=a.timeout,u=a.clientType,v=t===void 0?m:t,w=c("useAsyncReStore")(),x=k(null),y=k(p),z=k(o),A=k(null),B=k(!1);e[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){B.current===!1&&(B.current=!0,c("promiseDone")(d("PakeCpaceWasm").PakeCPaceWasm().then(function(a){A.current=a}),void 0,n));return function(){var a;z.current();(a=x.current)==null?void 0:a["delete"]();y.current()}},t=[],e[0]=a,e[1]=t):(a=e[0],t=e[1]);j(a,t);e[2]!==u||e[3]!==w||e[4]!==f||e[5]!==g||e[6]!==i||e[7]!==q||e[8]!==r||e[9]!==s||e[10]!==v?(a=function(a){return(h||(h=b("Promise"))).all([w,l.load()]).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=b[0];b=b[1];b=(yield b({clientType:u,onGeneralFailure:f,onMaxAttemptsReached:g,onNoSessionExists:i,onSessionExpired:q,onSuccessfulSecretDecryption:r,onWrongOtc:s,otc:a,pakeCpaceModule:A.current,storage:c,timeout:v}));c=b.pakeClient;var d=b.stopTimeout;b=b.unsubFromMessagesTable;x.current=c;y.current=d;z.current=b});return function(a){return c.apply(this,arguments)}}())},e[2]=u,e[3]=w,e[4]=f,e[5]=g,e[6]=i,e[7]=q,e[8]=r,e[9]=s,e[10]=v,e[11]=a):a=e[11];t=a;e[12]!==t?(a={establishPakeHandshakeAsInitiator:t},e[12]=t,e[13]=a):a=e[13];return a}function n(){c("FBLogger")("labyrinth_web").mustfix("PAKE: Error loading WASM module")}function o(){}function p(){}g["default"]=a}),98);
__d("usePushFDSMultiStepDialogEntryPointPage",["BaseMultiPageEntryPointImpl.react","CometRelay","FDSMultiStepDialogPushPageContext.react","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useContext,k=b.useTransition;function a(a,b){var e=d("react-compiler-runtime").c(8),f=k(),g=f[0],h=f[1],l=c("useCometRelayEntrypointContextualEnvironmentProvider")(),m=j(d("FDSMultiStepDialogPushPageContext.react").FDSMultiStepDialogPushPageContext);e[0]!==l||e[1]!==a||e[2]!==b||e[3]!==m?(f=function(e,f){if(b==null)return;h(function(){var g,h=d("CometRelay").loadEntryPoint(l,a,b);g=(g=f)!=null?g:{};var j=g.fallback;g=babelHelpers.objectWithoutPropertiesLoose(g,["fallback"]);m(function(){return i.jsx(c("BaseMultiPageEntryPointImpl.react"),{entryPoint:a,environmentProvider:l,fallback:j,loadedEntryPoint:h,otherProps:e,preloadParams:b,usePlaceholder:j!=null})},g)})},e[0]=l,e[1]=a,e[2]=b,e[3]=m,e[4]=f):f=e[4];f=f;var n;e[5]!==g||e[6]!==f?(n=[g,f],e[5]=g,e[6]=f,e[7]=n):n=e[7];return n}g["default"]=a}),98);
__d("MWEncryptedBackupsInsertOTCStep.react",["fbt","EBSMGating","FBLogger","FocusRegion.react","JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsOTCHelpDialogPage.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBOTCErrorMessages","MWEBOTCGating","MWEBQPOneTimeCode.react","MWEncrypedBackupsSendOTCNotifications","MWEncryptedBackupsLocalStorageEntryEnum","MWXColumn.react","MWXColumnItem.react","MWXDeferredPopoverTrigger.react","MWXDialogPageLegacy.react","MWXLink.react","MWXMultiStepDialogHeader.react","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","PAKEClientTypeEnum","QPLUserFlow","focusScopeQueries","gkx","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore","useFetchOTCEligibleEBDevices","useMWChatEncryptedBackupsNumericCode","useMWEBFlowSourceContext","usePakeInitiatorManager","usePushFDSMultiStepDialogEntryPointPage","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext,l=b.useEffect;b.useMemo;var m=b.useRef,n=b.useState,o=c("requireDeferred")("MWEBUseLocalStorage").__setRef("MWEncryptedBackupsInsertOTCStep.react"),p=c("requireDeferred")("MWEncryptedBackupsFetchBackupIds").__setRef("MWEncryptedBackupsInsertOTCStep.react"),q=c("requireDeferred")("MWEncryptedBackupsOTCEligibleDevicesPopover.react").__setRef("MWEncryptedBackupsInsertOTCStep.react"),r=c("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("MWEncryptedBackupsInsertOTCStep.react"),s=c("requireDeferred")("deserializeSecretsAndAddDevice").__setRef("MWEncryptedBackupsInsertOTCStep.react"),t=c("JSResourceForInteraction")("MWEBPushResetPinPage").__setRef("MWEncryptedBackupsInsertOTCStep.react"),u="chat-encrypted-backups-dialog-layout-second-step",aa=6,ba=c("gkx")("23219"),ca=c("gkx")("20861");function a(a){var b=d("react-compiler-runtime").c(88),e=a.isSecondStep,f=a.onComplete,g=a.onViewAllDevices,i=a.onClose,w=a.onSkip,x=e===void 0?!1:e;a=n(!1);e=a[0];var y=a[1],z=m(!1),A=m(!1),B=m(fa);a=n(null);var C=a[0],D=a[1],E=c("useAsyncReStore")();a=c("useFetchOTCEligibleEBDevices")(x?"store-or-network":"network-only");var F=a.triggerFetchOtcEligibleDevices,G=c("useMWEBFlowSourceContext")(),H=k(c("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted,I;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){return function(){B.current()}},I=[],b[0]=a,b[1]=I):(a=b[0],I=b[1]);l(a,I);a=d("MWEncrypedBackupsSendOTCNotifications").useSendOTCNotifications();var J=a[0];I=a[1];b[2]!==J?(a=function(){J()["catch"](function(){c("FBLogger")("labyrinth_web").mustfix("OTC: Send otc notifications sproc failed."),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_SEND_NOTIFICATION_FAILURE"),D(d("MWEBOTCErrorMessages").getNotificationFailedToSendErrorMessage())})},b[2]=J,b[3]=a):a=b[3];var K=a,L;b[4]!==x||b[5]!==K?(a=function(){z.current===!1&&(z.current=!0,c("promiseDone")(t.load()),c("MWChatEncryptedBackupsOTCHelpDialogPage.entrypoint").root.preload(),x||K())},L=[x,K],b[4]=x,b[5]=K,b[6]=a,b[7]=L):(a=b[6],L=b[7]);l(a,L);b[8]!==H?(a=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_API_FAILURE"),D(d("MWEBOTCErrorMessages").getGeneralErrorMessage()),A.current=!0,y(!1),H==null?void 0:H(!1)},b[8]=H,b[9]=a):a=b[9];L=a;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_MAX_ATTEMPTS_REACHED"),D(d("MWEBOTCErrorMessages").getMaxAttemptsReachedErrorMessage()),A.current=!0,y(!1)},b[10]=a):a=b[10];var M;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(M=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_NO_SESSION"),D(d("MWEBOTCErrorMessages").getNoSessionOngoingErrorMessage()),A.current=!0,y(!1)},b[11]=M):M=b[11];var N;b[12]===Symbol["for"]("react.memo_cache_sentinel")?(N=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_SESSION_EXPIRED"),D(d("MWEBOTCErrorMessages").getSessionExpiredErrorMessage()),A.current=!0,y(!1)},b[12]=N):N=b[12];var O;b[13]!==E||b[14]!==f||b[15]!==H?(O=function(a){var b=a.decryptedSecret,e=a.initiatorId;H==null?void 0:H(!0);c("promiseDone")(s.load(),function(a){c("promiseDone")(E.then(function(g){return a({db:g,initiatorId:e,onAddDeviceFailure:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_ADD_DEVICE_FAILURE"),D(d("MWEBOTCErrorMessages").getGeneralErrorMessage()),A.current=!0,y(!1),H==null?void 0:H(!1)},onAddDeviceFinish:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_ADD_DEVICE_FINISHED"),d("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:d("EBSMGating").isBackendSetupSuccessfulForEBSM()}},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),r.onReady(function(a){a=a.upsertEBSharedStateEntry;c("promiseDone")(a({db:g,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))}),o.onReady(ea),f(),y(!1),p.onReady(function(a){a=a.encryptedBackupsFetchBackupIds;a(g)["catch"](da)})},secrets:b})}),function(a){B.current=a})})},b[13]=E,b[14]=f,b[15]=H,b[16]=O):O=b[16];O=O;var P;b[17]===Symbol["for"]("react.memo_cache_sentinel")?(P=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_INCORRECT_CODE"),D(d("MWEBOTCErrorMessages").getOtcIsWrongErrorMessage()),A.current=!0,y(!1)},b[17]=P):P=b[17];b[18]!==O||b[19]!==L?(a={clientType:c("PAKEClientTypeEnum").ENCRYPTED_BACKUPS,onGeneralFailure:L,onMaxAttemptsReached:a,onNoSessionExists:M,onSessionExpired:N,onSuccessfulSecretDecryption:O,onWrongOtc:P},b[18]=O,b[19]=L,b[20]=a):a=b[20];M=c("usePakeInitiatorManager")(a);var Q=M.establishPakeHandshakeAsInitiator;b[21]===Symbol["for"]("react.memo_cache_sentinel")?(N=function(){D()},b[21]=N):N=b[21];b[22]!==Q||b[23]!==G?(P={focusRegionId:u,inputSize:aa,onChange:N,onComplete:function(a){var b=G();c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"one_time_code",source:b}});y(!0);c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_SUBMIT");c("promiseDone")(Q(a))}},b[22]=Q,b[23]=G,b[24]=P):P=b[24];O=d("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode(P);L=O[0];a=O[1];var R=a.clearNumericInput,S=a.focusOnInput;M=a.isLoading;b[25]!==S||b[26]!==K?(N=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_RESEND_CLICK"),K(),S()},b[25]=S,b[26]=K,b[27]=N):N=b[27];P=N;b[28]===Symbol["for"]("react.memo_cache_sentinel")?(O={},b[28]=O):O=b[28];a=c("usePushFDSMultiStepDialogEntryPointPage")(c("MWChatEncryptedBackupsOTCHelpDialogPage.entrypoint"),O);var T=a[1];b[29]!==i||b[30]!==w||b[31]!==T?(N=function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_HELP_CLICK"),d("MWEBOTCGating").shouldSeeNewHelpFlow()&&T({onClose:i,onSkip:w})},b[29]=i,b[30]=w,b[31]=T,b[32]=N):N=b[32];O=N;b[33]!==R?(a=function(){A.current&&(R(),A.current=!1)},N=[R],b[33]=R,b[34]=a,b[35]=N):(a=b[34],N=b[35]);l(a,N);b[36]!==S||b[37]!==x?(a={onVisible:function(){c("QPLUserFlow").addAnnotations(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{bool:{otc_check_first:x,otc_devices_popover:d("MWEBOTCGating").showDevicesPopover()}}),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_SCREEN"),S()}},b[36]=S,b[37]=x,b[38]=a):a=b[38];N=c("useVisibilityObserver")(a);b[39]!==x?(a=d("MWEBOTCGating").showNewTitle()&&!x?h._("__JHASH__ZdKKLkchlbs__JHASH__"):h._("__JHASH__mdY4-jjsr2I__JHASH__"),b[39]=x,b[40]=a):a=b[40];a=a;var U;b[41]!==R||b[42]!==M||b[43]!==I||b[44]!==P||b[45]!==g||b[46]!==F?(U=d("MWEBOTCGating").showResendButton()?{disabled:M||I,label:h._("__JHASH__UA_X5BHDdA7__JHASH__"),onPress:P,testid:"mw-eb-otc-insert-resend-code-button"}:{disabled:M,label:h._("__JHASH__UdIx77e_03V__JHASH__"),onPress:function(){R(),D(),g({onFetchOtcEligibleDevicesError:function(){D(d("MWEBOTCErrorMessages").getFailedToFetchOtcDevicesErrorMessage()),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_FETCH_OTC_ELIGIBLE_DEVICES_FAILURE"),F()},onResendCodeFailure:function(){D(d("MWEBOTCErrorMessages").getNotificationFailedToSendErrorMessage()),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESEND_NOTIFICATION_FAILURE")}}),c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_VIEW_ALL_DEVICES_CLICK")}},b[41]=R,b[42]=M,b[43]=I,b[44]=P,b[45]=g,b[46]=F,b[47]=U):U=b[47];I=U;P=I;b[48]!==x||b[49]!==O?(U=d("MWEBOTCGating").showResendButton&&!x?{label:h._("__JHASH__94rkJHAT5R0__JHASH__"),linkProps:d("MWEBOTCGating").shouldSeeNewHelpFlow?void 0:{target:"_blank",url:"https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more"},onPress:O,testid:"mw-eb-otc-insert-help-button"}:void 0,b[48]=x,b[49]=O,b[50]=U):U=b[50];I=U;O=I;U=O!=null;b[51]===Symbol["for"]("react.memo_cache_sentinel")?(I=j.jsx(c("MWXMultiStepDialogHeader.react"),{withCloseButton:!1,withoutBackButton:!0,withoutHeaderBottomBorder:!0}),b[51]=I):I=b[51];var V=U&&!e?P:void 0;O=U&&!e?O:void 0;var W;b[52]===Symbol["for"]("react.memo_cache_sentinel")?(W={className:"x2lwn1j"},b[52]=W):W=b[52];var X=U&&!e?void 0:16,Y;b[53]===Symbol["for"]("react.memo_cache_sentinel")?(Y=j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:16,children:j.jsx("div",babelHelpers["extends"]({className:"xg87l8a"},{children:j.jsx(c("MWEBQPOneTimeCode.react"),{})}))}),b[53]=Y):Y=b[53];var Z;b[54]!==a?(Z=j.jsx(c("MWXColumnItem.react"),{align:"center",paddingVertical:16,children:j.jsx(c("MWXText.react"),{align:"center",type:"headlineEmphasized2",children:a})}),b[54]=a,b[55]=Z):Z=b[55];b[56]!==x?(a=!x&&j.jsx(c("MWXColumnItem.react"),{align:"center",children:j.jsx("div",babelHelpers["extends"]({className:"x1l90r2v x2b8uid"},{children:d("MWEBOTCGating").showDevicesPopover()?j.jsx(c("MWXDeferredPopoverTrigger.react"),{align:"middle",popoverProps:{},popoverResource:q,position:"above",children:v}):j.jsx(c("MWXText.react"),{color:"secondary",type:"body3",children:h._("__JHASH__lzSAd4UfKCU__JHASH__")})}))}),b[56]=x,b[57]=a):a=b[57];M=M||e;var $;b[58]!==L||b[59]!==M?($=j.jsx(d("FocusRegion.react").FocusRegion,{autoFocusQuery:d("focusScopeQueries").tabbableScopeQuery,id:u,children:j.jsx(c("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers["extends"]({},L,{disabled:M,testid:void 0}))}),b[58]=L,b[59]=M,b[60]=$):$=b[60];b[61]!==C||b[62]!==$?(L=j.jsx(c("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:C,children:$}),b[61]=C,b[62]=$,b[63]=L):L=b[63];b[64]!==C?(M=ca&&C===d("MWEBOTCErrorMessages").getGeneralErrorMessage()?j.jsx("div",babelHelpers["extends"]({className:"xwib8y2"},{children:j.jsx(c("MWXText.react"),{align:"center",color:"negative",type:"body4",children:h._("__JHASH__47yJJ8U23lB__JHASH__")})})):null,b[64]=C,b[65]=M):M=b[65];b[66]!==L||b[67]!==M?($=j.jsxs(c("MWXColumnItem.react"),{align:"center",children:[L,M]}),b[66]=L,b[67]=M,b[68]=$):$=b[68];b[69]!==e||b[70]!==U?(C=e&&j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:U?16:0,paddingVertical:U?8:0,children:j.jsxs(c("MWXRow.react"),{align:"center",paddingTop:8,spacing:8,children:[j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXSpinner.react"),{color:ba?"disabled":"blue",size:12})}),j.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:j.jsx(c("MWXText.react"),{color:"secondary",testid:void 0,type:"body3",children:h._("__JHASH__G3IwntRJlbU__JHASH__")})})]})}),b[69]=e,b[70]=U,b[71]=C):C=b[71];b[72]!==e||b[73]!==P||b[74]!==U?(L=!U&&!e&&j.jsx(c("MWXColumnItem.react"),{align:"center",paddingTop:8,children:j.jsx(c("MWXText.react"),{color:P.disabled?"disabled":"highlight",type:"button2",children:j.jsx(c("MWXLink.react"),{disabled:P.disabled,onClick:P.onPress,rel:"noreferrer",children:P.label})})}),b[72]=e,b[73]=P,b[74]=U,b[75]=L):L=b[75];b[76]!==X||b[77]!==Z||b[78]!==a||b[79]!==$||b[80]!==C||b[81]!==L?(M=j.jsx("div",babelHelpers["extends"]({},W,{children:j.jsxs(c("MWXColumn.react"),{align:"center",paddingHorizontal:16,paddingTop:16,paddingVertical:X,spacing:8,children:[Y,Z,a,$,C,L]})})),b[76]=X,b[77]=Z,b[78]=a,b[79]=$,b[80]=C,b[81]=L,b[82]=M):M=b[82];b[83]!==N||b[84]!==V||b[85]!==O||b[86]!==M?(e=j.jsxs(j.Fragment,{children:[I,j.jsx(c("MWXDialogPageLegacy.react"),{callToActionGroupLayout:"expanded",includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION:!1,primaryCallToAction:V,ref:N,secondaryCallToAction:O,children:M})]}),b[83]=N,b[84]=V,b[85]=O,b[86]=M,b[87]=e):e=b[87];return e}function v(a,b){return j.jsx(c("MWXText.react"),{color:"secondary",type:"body3",children:h._("__JHASH__qB8i3rbuT2p__JHASH__",[h._param("device",j.jsx(c("MWXText.react"),{color:"blueLink",ref:a,type:"bodyLink3",children:j.jsx(c("MWXLink.react"),{onClick:function(){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_DEVICES_POPOVER_CLICK"),b()},testid:void 0,children:h._("__JHASH__l-i0ZTsx1AJ__JHASH__")})}))])})}v.displayName=v.name+" [from "+f.id+"]";function da(a){return c("FBLogger")("labyrinth_web").mustfix("OTC Restore: Error when fetching backup ids, %s",a)}function ea(a){var b=a.mwEBCreateLocalStorageEntry;a=a.mwEBDeleteLocalStorageEntry;b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION);b(c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2);a(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}function fa(){}g["default"]=a}),226);
__d("useMWEBAutoRestoreNoticeStep",["MWChatEncryptedBackupsDismissalDialogContext","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","ReQL","ReQLSuspense","deferredLoadComponent","react","react-compiler-runtime","react-forget-runtime","requireDeferred","useLabyrinthLogging","useMWEBFlowSourceContext","useMWEBSetHasSeenNotice","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=h||(h=c("react"));b.useCallback;b.useContext;var l=c("deferredLoadComponent")(c("requireDeferred")("MWEBAutoRestoreNoticeDialogStep.react").__setRef("useMWEBAutoRestoreNoticeStep"));function a(){var a=d("react-compiler-runtime").c(10),b=d("useLabyrinthLogging").useLabyrinthLoggingFlow(),e=b.startFlow;b=d("react-forget-runtime").useContextWithBailoutExperiment__unstable(c("MWChatEncryptedBackupsDismissalDialogContext"),n);var g=b.setIsDismissedDisabled,h=c("useMWEBFlowSourceContext")(),j=(i||(i=c("useReStore")))();a[0]!==j.tables.auto_restore_opt_out?(b=function(){return d("ReQL").fromTableAscending(j.tables.auto_restore_opt_out)},a[0]=j.tables.auto_restore_opt_out,a[1]=b):b=a[1];var o;a[2]!==j?(o=[j],a[2]=j,a[3]=o):o=a[3];var p=d("ReQLSuspense").useArray(b,o,f.id+":55"),q=c("useMWEBSetHasSeenNotice")();a[4]!==p||a[5]!==h||a[6]!==q||a[7]!==g||a[8]!==e?(b=function(a){var b=a.hasSeenNotice,f=a.onNextStep,i=a.pushPage;a=p.filter(m).length>0;var j=function(){d("MWChatEncryptedBackupsLogging").endSuccess({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent}),f()};e({event:d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,source:h()});if(a){c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_OUT");j();return}c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_IN");d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT);if(b){j();return}g(!0);q();i(function(){return k.jsx(l,{onComplete:j,pushPage:i})},{withoutBackButton:!0,withoutCloseButton:!0})},a[4]=p,a[5]=h,a[6]=q,a[7]=g,a[8]=e,a[9]=b):b=a[9];return b}function m(a){return a.optOutKey===c("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE}function n(a){return[a.setIsDismissedDisabled]}g["default"]=a}),98);